<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="ie=edge" http-equiv="x-ua-compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>Enabling AI with the Ability to Place Phone Calls: Task Fulfillment Using Generative AI and Amazon Connect - Ian Ryan</title>


  <meta name="description" content="Enabling AI to place phone calls, this blog explores task fulfillment using cutting-edge technologies like ChatGPT, Amazon Lex, and Amazon Connect. It outlines the process of creating an intelligent chatbot that can autonomously make calls to real people, reflecting on the historical milestone of Google's Duplex, and delves into the modern advancements that make this innovation both accessible and customizable."/>






  <meta property="og:image" content="/assets/images/gen/blog/booking_bot.png"/>







    <link rel="icon" href="/assets/images/favicon/favicon.png">
    <link href="/assets/css/main.css" rel="stylesheet">
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&family=Merriweather:wght@300;400;700&family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    
      <script>
          localStorage.getItem('darkMode') === 'true' && document.documentElement.setAttribute('data-mode', 'dark');
      </script>
    

  </head>
<body class="page page-post page-post-1 has-static-header">


<div class="menu-main-mobile " id="menu-main-mobile">
  
  <div class="menu-main-mobile-top">
    <div id="close-overlay" class="menu-main-close">
      <div class="hamburger"></div>
    </div>
  </div>

  <div class="menu-main-mobile-center">
    
      <ul class="menu">
        
          <li class="menu-item-home">
            <a href="/">Home</a>
          </li>
        
          <li class="menu-item-blog">
            <a href="/blog/">Blog</a>
          </li>
        
      </ul>
    
  </div>

  <div class="menu-main-mobile-bottom">
    
      

<div class="social" id="social">
  
  <a href="https://github.com/ianchristopherryan/" target="blank" title="Github">
    <i class="fab fa-github"></i>
  </a>
  
  <a href="https://www.linkedin.com/in/ian-christopher-ryan/" target="blank" title="Linkedin">
    <i class="fab fa-linkedin"></i>
  </a>
  
  <a href="https://www.youtube.com/@ianchristopherryan" target="blank" title="YouTube">
    <i class="fab fa-youtube"></i>
  </a>
  
</div>


    
    
  </div>

</div>




<div id="header" class='header '>
  <div class="container">
    <div class="logos">
  <div class="logo logo-desktop">
    
  
    
      <div class="logo-text"><a href="/">Ian Christopher Ryan</a></div>
    
    
  </div>

  <div class="logo logo-desktop-invert">
    
    
  
    
      <div class="logo-text"><a href="/">Ian Christopher Ryan</a></div>
    
    
  </div>

  <div class="logo logo-mobile">
    
    
  
    
      <div class="logo-text"><a href="/">Ian Christopher Ryan</a></div>
    
    
  </div>


  <div class="logo logo-mobile-invert">
    
    
  
    
      <div class="logo-text"><a href="/">Ian Christopher Ryan</a></div>
    

  </div>

</div>


    <div class="menu-main">
  <ul>
    
      
        
        <li class="">
          <a href="/">Home</a>
        </li>
      
    
      
        
        <li class="">
          <a href="/blog/">Blog</a>
        </li>
      
    
  </ul>
</div>

    
      <div class="dark-mode-switcher " id="dark-mode-container">
  <div class="dark-mode-switch">
    <svg class="dark-mode-icon-dark" data-name="Layer 1" fill="#000000" height="20px" viewbox="0 0 64 64" width="20px" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px">
      <title>essential</title>
      <path d="M33.28,58.24A26.95,26.95,0,0,1,24,6l.39-.13a2,2,0,0,1,2.4,2.87,22.42,22.42,0,0,0-1.51,18.75h0A22.47,22.47,0,0,0,54.09,40.8l.76-.3a2,2,0,0,1,2.24.48,2,2,0,0,1,.35,2.24,27,27,0,0,1-24.16,15ZM21.11,11.85a22.94,22.94,0,1,0,30,33.91A26.46,26.46,0,0,1,21.53,28.87h0A26.4,26.4,0,0,1,21.11,11.85Z"></path>
    </svg>
    <svg class="dark-mode-icon-light" fill="#000000" height="20px" style="enable-background: new 0 0 100 100;" version="1.1" viewbox="0 0 100 100" width="20px" x="0px" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" y="0px">
      <g>
        <path d="M50,75c-13.8,0-25-11.2-25-25s11.2-25,25-25s25,11.2,25,25S63.8,75,50,75z M50,33.3c-9.2,0-16.7,7.5-16.7,16.7   c0,9.2,7.5,16.7,16.7,16.7c9.2,0,16.7-7.5,16.7-16.7C66.7,40.8,59.2,33.3,50,33.3z"></path>
      </g>
      <g>
        <path d="M50,100c-2.3,0-4.2-1.9-4.2-4.2v-8.3c0-2.3,1.9-4.2,4.2-4.2c2.3,0,4.2,1.9,4.2,4.2v8.3C54.2,98.1,52.3,100,50,100z    M17.5,86.7c-1.1,0-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.3,0-5.9l5.8-5.8c1.6-1.6,4.3-1.6,5.9,0c1.6,1.6,1.6,4.3,0,5.9l-5.8,5.8   C19.6,86.3,18.6,86.7,17.5,86.7z M82.5,86.7c-1.1,0-2.1-0.4-2.9-1.2l-5.8-5.8c-1.6-1.6-1.6-4.3,0-5.9s4.3-1.6,5.9,0l5.8,5.8   c1.6,1.6,1.6,4.3,0,5.9C84.6,86.3,83.6,86.7,82.5,86.7z M95.8,54.2h-8.3c-2.3,0-4.2-1.9-4.2-4.2c0-2.3,1.9-4.2,4.2-4.2h8.3   c2.3,0,4.2,1.9,4.2,4.2C100,52.3,98.1,54.2,95.8,54.2z M12.5,54.2H4.2C1.9,54.2,0,52.3,0,50c0-2.3,1.9-4.2,4.2-4.2h8.3   c2.3,0,4.2,1.9,4.2,4.2C16.7,52.3,14.8,54.2,12.5,54.2z M76.7,27.5c-1.1,0-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.3,0-5.9l5.8-5.8   c1.6-1.6,4.3-1.6,5.9,0c1.6,1.6,1.6,4.3,0,5.9l-5.8,5.8C78.8,27.1,77.7,27.5,76.7,27.5z M23.3,27.5c-1.1,0-2.1-0.4-2.9-1.2   l-5.8-5.8c-1.6-1.6-1.6-4.3,0-5.9c1.6-1.6,4.3-1.6,5.9,0l5.8,5.8c1.6,1.6,1.6,4.3,0,5.9C25.5,27.1,24.4,27.5,23.3,27.5z M50,16.7   c-2.3,0-4.2-1.9-4.2-4.2V4.2C45.8,1.9,47.7,0,50,0c2.3,0,4.2,1.9,4.2,4.2v8.3C54.2,14.8,52.3,16.7,50,16.7z"></path>
      </g>
    </svg>
    <div class="ball"></div>
  </div>
</div>
    
    <div class="hamburger-trigger" id="toggle-menu-main-mobile">
  <button class="hamburger">Menu</button>
</div>
  </div>
</div>

<div id="wrapper" class="wrapper">     
  <div class="section">
  <div class="container post-header">

    <div class="row justify-content-center">
      <div class="col-12 col-lg-8">
          
            <div class="post-date">03 August 2023</div>
          
          
          <div class="post-categories">
          


  
    




<div class="category-link">
<a href="/category/aws">
  AWS
</a>

</div>
  
    




<div class="category-link">
<a href="/category/amazon-connect">
  Amazon Connect
</a>

</div>
  
    




<div class="category-link">
<a href="/category/cx">
  CX
</a>

</div>
  
    




<div class="category-link">
<a href="/category/ai">
  AI
</a>

</div>
  

          
          </div>
          <div class="post-title">
            <h1>Enabling AI with the Ability to Place Phone Calls: Task Fulfillment Using Generative AI and Amazon Connect</h1>
          </div>
          
            <div class="post-description">
              <p>Enabling AI to place phone calls, this blog explores task fulfillment using cutting-edge technologies like ChatGPT, Amazon Lex, and Amazon Connect. It outlines the process of creating an intelligent chatbot that can autonomously make calls to real people, reflecting on the historical milestone of Google's Duplex, and delves into the modern advancements that make this innovation both accessible and customizable.</p>
            </div>
          

          
            <div class="post-authors">
              
              
              
              




<div class="author">
  
    <div class="author-image">
      <img src="/assets/images/team/ianryan.jpeg" alt="Ian Ryan"/>
    </div>
  

  
    <div class="author-content">
      <div class="author-name">Ian Ryan</div>
      
        <div class="author-job">AWS Architect</div>
      
    </div>
  
</div>
              
            </div>
          

      </div>
    </div>
          
    <div class="row justify-content-center">
      <div class="col-12 col-lg-8">
        
          <div class="post-image">
            <img src="/assets/images/gen/blog/booking_bot.png" alt="Enabling AI with the Ability to Place Phone Calls: Task Fulfillment Using Generative AI and Amazon Connect" />
          </div>
        
      </div>
    </div>

  </div>
</div>

<div class="section pt-0">
  <div class="container">
    <div class="row justify-content-center">

      <div class="col-12 col-lg-8">
        <div class="content"><h2 id="demo-video">Demo video</h2>

<p><a href="https://youtu.be/Ux27-w9iSeg" target="_blank">Click here for a demo of this AI interaction on my channel on YouTube</a></p>

<h2 id="introduction">Introduction</h2>

<p>The concept of AI interacting with humans through natural language is no longer confined to the realms of science fiction. Today, we find ourselves on the brink of an era where machines can not only understand and respond to our words but can even emulate human-like conversations to fulfill real-world tasks over the phone.</p>

<h3 id="the-historical-perspective-googles-duplex">The Historical Perspective: Google’s Duplex</h3>

<p>In 2018, Google introduced Duplex, an AI system that could make reservations at restaurants, book appointments, and more, all over the phone. It was one of the first prominent attempts to bridge the gap between machine and human interaction in real-life scenarios.</p>

<p>Duplex’s demonstrations were nothing short of awe-inspiring. The system could understand complex speech patterns, pauses, filler words, and could even mimic human-like intonations. The goal was to make the interaction indistinguishable from a human caller.</p>

<p>However, the initial launch of Duplex also raised several ethical and technological questions:</p>

<ul>
  <li>Should the recipient know that they are speaking to a machine?</li>
  <li>Can this be misused for negative actions such as robocalling or scams?</li>
  <li>Can this be practically integrated into existing solutions?</li>
</ul>

<p>Though groundbreaking, Duplex was seen as more of a specialized tool rather than a versatile platform.</p>

<h3 id="the-current-state-advancements-and-opportunities">The Current State: Advancements and Opportunities</h3>

<p>Fast forward to the present, and the landscape of AI-driven communication has evolved dramatically. With advancements in natural language processing (NLP), deep learning, and cloud computing, creating a system similar to Duplex is no longer a herculean task. In fact, it can be quite easily built using AWS and any current generative AI model.</p>

<p>Technologies like Amazon Lex, ChatGPT, and Amazon Connect have made it possible to build intelligent chat bots capable of placing phone calls and interacting with real people. These tools offer a range of customization, scalability, and functionality that allows anyone to leverage the power of AI in their customer interactions.</p>

<p>In this comprehensive guide, we’ll explore how you can create an AI system that autonomously places phone calls to perform tasks, combining the cutting-edge capabilities of Amazon Lex, ChatGPT, and Amazon Connect. We’ll delve into the architecture, implementation, and considerations to transform the way you automate essential services.</p>

<p>By tracing the journey from Google’s Duplex to the current state-of-the-art technologies, we’ll see how far we’ve come and where we’re headed in the exciting field of AI-powered communication.</p>

<p>So lets get stuck in and build the solution!</p>

<h2 id="architecture-overview">Architecture Overview</h2>

<figure>
  <!--<a href="" target="">-->
    <img src="/assets/images/blog/20230803/outbound_diagram.png" alt="" />
  <!--</a>-->
  <figcaption>
    <h4></h4>
    <p></p>
  </figcaption>
</figure>

<ol>
  <li>The user interacts with a chatbot via a web interface. In our example here we will use the built in chat interface in Amazon Connect, however any chat interface could be used and designed here.</li>
  <li>Interactions with the chatbot are handled using the ChatGPT interface we have previously built. This uses stored prompts the engage ChatGPT and to provide responses.</li>
  <li>When the chatbot has sufficient information about the task it will perform, a Task Management Lambda function stores the information in DynamoDB.</li>
  <li>DynamoDB streams trigger an Outbound Call Manager Lambda function that is able to place outbound calls in Amazon Connect.</li>
  <li>The outbound call is delivered to a real person, and all interaction is now handled by the AI.</li>
  <li>ChatGPT (as out generative AI of choice) is now engaged again, this time to interact with the real person. Amazon connect is using Polly to speak the responses to the receptionist.</li>
  <li>When the conversation is complete, the Task Management Lambda is again called to update the Task status and result in DynamoDB.</li>
  <li>A Lambda is triggered to update the result of the task back to the original chatbot.</li>
  <li>The user is informed of the result in their original chat.</li>
</ol>

<p>We can now break this interaction into four logical areas.</p>

<h2 id="1-initial-interaction-with-user-gathering-task-information-and-storing-details">1. Initial Interaction with User: Gathering Task Information and Storing Details</h2>

<p><strong>Interaction with Amazon Lex Bot and Integration with ChatGPT</strong></p>

<p>The initial interaction with the user is the first step in this process. Amazon Lex is employed to execute the conversation, while ChatGPT has been added in to allow Lex to sound more natural and human-like. Here’s a more detailed breakdown:</p>

<p><strong>Understanding User Intent without Overwhelming Them:</strong></p>

<ul>
  <li>The Lex bot using ChatGPT is designed to ask targeted questions to gather only the essential information needed, without overloading the user with queries.</li>
  <li>
    <p>Leveraging the conversational ability of ChatGPT, the bot can adapt to user responses, ensuring that the conversation flows naturally.</p>
  </li>
  <li><strong>Example Interaction:</strong>
    <ul>
      <li><strong>User:</strong> “I need to book a doctor’s appointment.”</li>
      <li><strong>Bot:</strong> “Certainly! What date works for you?”</li>
      <li><strong>User:</strong> “Next Monday.”</li>
      <li><strong>Bot:</strong> “Morning or afternoon?”</li>
      <li><strong>User:</strong> “Morning, please.”</li>
      <li><strong>Bot:</strong> “Great! I will let you know when its done.”</li>
    </ul>
  </li>
</ul>

<p><strong>Using ChatGPT via Lambda and Lex to gather initial information:</strong></p>

<p>I have discussed using ChatGPT to gather the information from a user in previous blog posts. In this example we are just going to use Lex and allow it to pass all requests to ChatGPT. We prime ChatGPT with some minimal context about what services it knows how to call (essentially a phone book listing), and then everything from that point on is just handled by the AI.</p>

<p>The basic prompt we are using to gather all of the information about the task here is something like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>You are a helpful assistant bot. You want to gather information about the task that a user wants you to perform with the minimal amount of questions.

Phone numbers available:
Doctors: +64412345678
Pizza: +6448765432
Hair: +64467567876
French Restaurant: +64434523423

The user has just said: I want to book a doctors appointment.

The JSON object returned should be in this format without deviation:

{
"PhoneNumberToCall":"String",
"ServiceName":"String",
"AdditionalQuestion":"String",
"HasAdditionalQuestion":"Boolean",
"FinalMessage":String",
"TaskToPerform":"String"
}

Do not include any explanations, only provide a  RFC8259 compliant JSON response.

</code></pre></div></div>

<p>Note that this is a fully populated prompt, with the information about services and what the user said already populated. The actual prompt we use in our solution is templated so we can insert the list of services and the user prompts that come from Lex dynamically. See my previous blog post for more details about how this works.</p>

<p>When we interact with this bot, we see behaviour such as this:</p>

<figure>
  <!--<a href="" target="">-->
    <img src="/assets/images/blog/20230803/chat_schedule.png" alt="" />
  <!--</a>-->
  <figcaption>
    <h4></h4>
    <p></p>
  </figcaption>
</figure>

<p><strong>Storing Information in Amazon DynamoDB and Decoupling Next Stages</strong></p>

<p>Once the necessary details are collected, they are stored in a DynamoDB table. Storing information in DynamoDB decouples this interaction stage from subsequent stages of the task. The initial bot’s sole responsibility is to understand the user’s request and gather relevant information, maintaining a separation of concerns. The bot will store the following information in DyanmoDB.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
 </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"266e9514-3650-4812-8307-0e1541199c63"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"PhoneNumberToCall"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+64412345678"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"ServiceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doctors"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"TaskResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
 </span><span class="nl">"TaskResultAdditionalContext"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
 </span><span class="nl">"TaskStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUBMITTED"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"TaskToPerform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Book doctors appointment for Tuesday afternoon"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="2-task-execution-triggering-lambda-function-and-initiating-a-phone-call-with-context">2. Task Execution: Triggering Lambda Function and Initiating a Phone Call with Context</h2>

<p><strong>Receiving Notification Event from DynamoDB</strong></p>

<p>The next stage in our process is to execute the task using the information gathered in the initial interaction. This stage commences with a notification event from DynamoDB, indicating that a new task has been added. Here’s how it works:</p>

<ul>
  <li>DynamoDB Streams can be configured to emit an event whenever a new item is added to the specified table. This feature allows real-time tracking of changes.</li>
  <li>AWS Lambda integrates seamlessly with DynamoDB Streams, allowing you to trigger a Lambda function in response to the addition of a new task.</li>
  <li>The triggered Lambda function receives the DynamoDB event, containing all the details of the new task, including phone number and the task to perform.</li>
</ul>

<p>Using this the lambda function we now have sufficient information about the task, so now we need to generate some context for the prompts to guide our AI that will be interacting with the real human.</p>

<p><strong>Crafting a Custom Prompt with Context for ChatGPT</strong></p>

<p>The next step is to formulate a custom prompt that will guide ChatGPT in performing the specific task. This prompt incorporates all the context information retrieved from DynamoDB.</p>

<p>We have built patterns in previous blog posts to store parameterized prompts in DynamoDB. In our case our fully populated example prompt will look something like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>You are acting as the persona of Ian Christopher Ryan. 

You need to complete the following task:
“Book doctors appointment for Tuesday afternoon.”

You have just contacted the doctors office and they have said:
“Wellington Doctors reception how can I help you?”

Response messages should be as if someone is actually naturally talking. Response messages should be conversational and very natural. Make sure the conversation does not sound robotic. Keep responses formal and to the point. Do not provide all information at the same time. Use a few filler words and pauses. Replace all commas and periods with: &lt;break time="60ms"/&gt;

Provide a JSON response only in the following format, do not deviate in any way, do not include any explanations or additional messages, only provide a  RFC8259 compliant JSON response. The single response should be in this JSON format:

{
"ResponseMessage":"String",
"Action":"continue|hangup",
"SummaryOfConversation":"String",
"SummaryOfTask":"String",
}
</code></pre></div></div>

<p>This is all the information we will give the AI, and we can allow the AI to now call the phone number as defined in the Task. The AI will then interact with the human, acting as if it is Ian.</p>

<p><strong>Placing an Outbound Call using Amazon Connect</strong></p>

<p>Once the ChatGPT session is created with the custom context, the Lambda function proceeds to initiate a phone call using Amazon Connect.</p>

<ul>
  <li>Using Amazon Connect SDK, the Lambda function can place an outbound call to the specified number.</li>
  <li>Within Amazon Connect, a custom contact flow can be designed to guide the interaction with the real receptionist, utilizing ChatGPT’s responses to communicate naturally.</li>
  <li>The combination of Amazon Connect and ChatGPT enables real-time conversation with the receptionist, allowing the AI to act on behalf of the real user.</li>
</ul>

<p>Placing an outbound call in Amazon connect is so simple its almost trivial, but for context a Lambda function to make an outbound call would look like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">AWS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">aws-sdk</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">connect</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWS</span><span class="p">.</span><span class="nx">Connect</span><span class="p">();</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">ContactFlowId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">a94afcbb-9b3b-44b8-bba4-0c314e3d615a</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">DestinationPhoneNumber</span><span class="p">:</span> <span class="dl">"</span><span class="s2">+64412345678</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">InstanceId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">42635c9d-68b4-430d-bbb5-0ae23035bf6d</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">QueueId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">3eef2a62-5e85-4d55-97a4-b348b9692b91</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">SourcePhoneNumber</span><span class="p">:</span> <span class="dl">"</span><span class="s2">+6448325717</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">Attributes</span><span class="p">:</span> <span class="p">{</span> 
            <span class="dl">"</span><span class="s2">TaskToPerform</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Book doctors appointment for Tuesday afternoon</span><span class="dl">"</span>
        <span class="p">}</span>
    <span class="p">};</span>

    <span class="nx">connect</span><span class="p">.</span><span class="nx">startOutboundVoiceContact</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">)</span> <span class="p">;</span>
        <span class="k">else</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">event</span><span class="p">);</span>

<span class="p">};</span>
</code></pre></div></div>

<p>Where the ContactFlowId is the id of the flow that will be executed when the call is connected. Also note that the SourcePhoneNumber must be a claimed number in your Connect instance.</p>

<h2 id="3-real-time-interaction-with-receptionist-using-amazon-connect-contact-flow-and-chatgpt">3. Real-Time Interaction with Receptionist: Using Amazon Connect Contact Flow and ChatGPT</h2>

<p>The third section of our process dives into the heart of the interaction – the real-time conversation between our AI-driven system and a human receptionist. Here’s how it unfolds:</p>

<p><strong>Contact Flow in Amazon Connect</strong></p>

<p>When the outbound call is initiated by the Lambda function from the previous step, it triggers a specific contact flow defined within Amazon Connect. This contact flow is the blueprint that guides the interaction, and it performs several key functions:</p>

<ul>
  <li>The contact flow is designed to listen and understand the input from the receptionist at the other end of the call.</li>
  <li>It integrates with ChatGPT, and uses the context of the task (e.g., booking a doctor’s appointment) to engage the receptionist in a manner that mirrors human conversation.</li>
</ul>

<p>An example flow is shown here below, with the previously discussed pattern of using lex to gather the input and engaging the generative AI for the responses. In this case when the conversation is complete the result is updated in Dyanmo and the call is disconnected.</p>

<figure>
  <!--<a href="" target="">-->
    <img src="/assets/images/blog/20230803/outbound_flow.png" alt="" />
  <!--</a>-->
  <figcaption>
    <h4></h4>
    <p></p>
  </figcaption>
</figure>

<p><strong>Intelligent Decision-Making with AI</strong></p>

<p>One of the standout features of this system is its ability to make decisions autonomously. Using ChatGPT, the AI does not just follow a script but adapts its responses based on the interaction. This adaptability includes:</p>

<ul>
  <li><strong>Handling Variations from Original Task:</strong> If the requested time or day for the appointment isn’t available, the AI will book as close to the original request as possible, without needing to consult the user.</li>
  <li><strong>Complex Decision-Making:</strong> The AI is designed to negotiate, make choices, and complete the task within the bounds of predefined criteria, much like a human assistant would.</li>
</ul>

<p><strong>Example Conversation with Real Receptionist</strong></p>

<p>Here is a real conversation that showcases the dynamic nature of this interaction, this is the conversation that is in the demo video for this blog post:</p>

<ul>
  <li><strong>Receptionist:</strong> “Wellington Doctors reception how can I help?”</li>
  <li><strong>AI:</strong> “Hello I’m looking to book an appointment with the doctor for Tuesday afternoon. Is there any availability then?”</li>
  <li><strong>Receptionist:</strong> “Are you a current patient here?”</li>
  <li><strong>AI:</strong> (Adapting to the situation) “Yes I am a patient there. My name is Ian Christopher Ryan. Could you please check the availability for Tuesday afternoon?”</li>
  <li><strong>Receptionist:</strong> “Ok, one moment please”</li>
  <li><strong>AI:</strong> “Of course. Take your time.”</li>
  <li><strong>Receptionist:</strong> “Hello are you there?”</li>
  <li><strong>AI:</strong> “Yes I’m still here”</li>
  <li><strong>Receptionist:</strong> “We don’t have anything on Tuesday, but can I fit you in at 11 the next day?”</li>
  <li><strong>AI:</strong> “Ah that’s unfortunate about Tuesday, but Wednesday at 11 should work. Could you please book that for me?”</li>
  <li><strong>Receptionist:</strong> “Hmmm, hang on a sec, OK I’ve booked you in with Dr O’Hara at 11 on Tuesday”</li>
  <li><strong>AI:</strong> “I appreciate that but I believe there might be a misunderstanding. You mentioned Tuesday was not available and offered Wednesday at 11. Could you please confirm if it’s for Wednesday with Dr. O’Hara?”</li>
  <li><strong>Receptionist:</strong> “Oh wait umm yes I meant Wednesday at 11”</li>
  <li><strong>AI:</strong> “Great. Thank you for confirming that. I’ll see Dr. O’Hara on Wednesday at 11 then. Have a good day.”</li>
  <li><strong>Receptionist:</strong> “Bye”</li>
</ul>

<p>Here, we can see the AI adapting to the minor variations from the original task (which specified “Tuesday afternoon”) and successfully completing the task by booking an appointment as close to the original request as possible. It was easily able to handle variations in the conversation, and completed its task.</p>

<h2 id="4-storing-results-and-notifying-the-user">4. Storing Results and Notifying the User</h2>

<p>Upon the successful completion of the conversation and task execution, the next step is to store the results and notify the original user. This is accomplished through the integration of DynamoDB and Lambda functions.</p>

<p><strong>Updating Results in DynamoDB</strong></p>

<p>Once the appointment is booked (or any other task is completed), the outcome is stored back in DynamoDB. This information would include all the final details. Our original task entry is now updated and looks like:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
 </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"266e9514-3650-4812-8307-0e1541199c63"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"PhoneNumberToCall"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+64412345678"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"ServiceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doctors"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"TaskResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successfully booked an appointment with Dr. O'Hara for Wednesday at 11."</span><span class="p">,</span><span class="w">
 </span><span class="nl">"TaskResultAdditionalContext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Initiated a conversation with Wellington Doctors reception to book an appointment for Tuesday afternoon. The receptionist found no availability on Tuesday and offered Wednesday at 11 instead. This was accepted, and after a brief misunderstanding, the receptionist confirmed the appointment for Wednesday."</span><span class="p">,</span><span class="w">
 </span><span class="nl">"TaskStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMPLETE"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"TaskToPerform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Book doctors appointment for Tuesday afternoon"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Notifying the Original User</strong></p>

<p>The real beauty of this system is in how it hides the complexity from the user. Regardless of how long the conversation with the receptionist takes or how many retries are required, the original user simply receives the final result. This process includes:</p>

<ul>
  <li>A Lambda function is triggered when the status in DynamoDB is updated to ‘completed’. This function is responsible for linking back to the original chatbot conversation.</li>
  <li>The original conversation with the chat bot is then updated with the details of the result.</li>
  <li>All delays, retries, hold times, and conversation complexities are handled behind the scenes. The user interacts only with the beginning and end of the process, enjoying a streamlined experience.</li>
</ul>

<figure>
  <!--<a href="" target="">-->
    <img src="/assets/images/blog/20230803/booked.png" alt="" />
  <!--</a>-->
  <figcaption>
    <h4></h4>
    <p></p>
  </figcaption>
</figure>

<h2 id="conclusion">Conclusion</h2>

<p>Google Duplex will always be remembered as a pioneering effort that pushed the boundaries of what was possible with AI and human interactions in this way. However, technology evolves, and what was once an incredibly complex effort is now within the reach of many organizations and developers.</p>

<p>As demonstrated in this blog, today’s AI and cloud technologies have made it possible to build intelligent, adaptive, and human-like conversational agents that can perform real-world tasks over the phone. It’s a testament to the rapid advancement in the field and the democratization of AI, enabling more businesses and individuals to harness the power of AI to create value and enhance user experiences.</p>

<p>I was almost hesitant to write this blog post though because een though you can easily build a solution like this, it does raise the question should we build these solutions?</p>

<h3 id="potential-ethics-and-the-future-of-ai-voice-interactions">Potential, Ethics, and the Future of AI Voice Interactions</h3>

<p>The AI-driven solutions, as detailed in this blog, illustrates not just technological advancement but also raises vital questions about ethics, regulation, and potential misuse.</p>

<p><strong>The Potential for Misuse</strong></p>

<p>As AI technology evolves rapidly, regulation often struggles to keep pace. This discrepancy opens the door for potential misuse, such as:</p>

<ul>
  <li>The ease of implementing intelligent voice systems could be exploited for robocalling or other malicious activities.</li>
  <li>The advancements in AI text-to-speech make it increasingly difficult for a person to identify whether they are speaking to an AI or a human. This could be misused to deceive or manipulate individuals.</li>
  <li>It creates opportunities for deception and fraud, underscoring the need for regulation, transparency, and ethical guidelines.</li>
</ul>

<p><strong>Looking Ahead: A Future Blog Post</strong></p>

<p>With the constant evolution of AI services, especially in platforms like AWS, we can anticipate even more advanced solutions in the near future. One of my future blog posts will shortly explore:</p>

<ul>
  <li><strong>New AWS AI Services:</strong> We’ll delve into upcoming AWS native AI services that could further streamline and enhance AI-driven voice interactions. Honestly I’m just waiting for access to these so I can build some awesome things.</li>
  <li><strong>Advanced AI voices:</strong> Although the Polly voice used in Amazon Connect is quite good, there are now much more advanced AI based natural voices that have become indistinguishable from human voices. Adding a better more natural voice to this solution would improve it vastly.</li>
</ul>

<h2 id="final-thoughts">Final Thoughts</h2>

<p>This is all very exciting from a technical lens. Being able to so easily build solutions like this is a testament to how far technology has come. However I am also very mindful that out AI future may not be all bright. Like all technology advances they have the potential to be misused, and as we all soberingly know, they will be. However its not all bleak, like all new technologies there will be positives as well as the negatives, we just have to hope and believe that the positives will outweigh the negatives.</p>
</div>
        
      </div>

    </div>
  </div>
</div>

</div>

<div class="bottom">
  <div class="container relative">
    <div class="row align-items-center justify-content-between">
      <div class="col-auto">
        
          <div class="menu-bottom">
  <ul>
    
      <li class="menu-item-Privacy Policy">
        <a href="/privacy-policy/">Privacy Policy</a>
      </li>
    
      <li class="menu-item-Terms and Conditions">
        <a href="/terms-and-conditions/">Terms and Conditions</a>
      </li>
    
  </ul>
</div>
        
        
          <div class="copyright">© 2023 Ian Christopher Ryan</div>
        
      </div>
      
        <div class="col-auto">
          <div class="dark-mode-switcher " id="dark-mode-container">
  <div class="dark-mode-switch">
    <svg class="dark-mode-icon-dark" data-name="Layer 1" fill="#000000" height="20px" viewbox="0 0 64 64" width="20px" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px">
      <title>essential</title>
      <path d="M33.28,58.24A26.95,26.95,0,0,1,24,6l.39-.13a2,2,0,0,1,2.4,2.87,22.42,22.42,0,0,0-1.51,18.75h0A22.47,22.47,0,0,0,54.09,40.8l.76-.3a2,2,0,0,1,2.24.48,2,2,0,0,1,.35,2.24,27,27,0,0,1-24.16,15ZM21.11,11.85a22.94,22.94,0,1,0,30,33.91A26.46,26.46,0,0,1,21.53,28.87h0A26.4,26.4,0,0,1,21.11,11.85Z"></path>
    </svg>
    <svg class="dark-mode-icon-light" fill="#000000" height="20px" style="enable-background: new 0 0 100 100;" version="1.1" viewbox="0 0 100 100" width="20px" x="0px" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" y="0px">
      <g>
        <path d="M50,75c-13.8,0-25-11.2-25-25s11.2-25,25-25s25,11.2,25,25S63.8,75,50,75z M50,33.3c-9.2,0-16.7,7.5-16.7,16.7   c0,9.2,7.5,16.7,16.7,16.7c9.2,0,16.7-7.5,16.7-16.7C66.7,40.8,59.2,33.3,50,33.3z"></path>
      </g>
      <g>
        <path d="M50,100c-2.3,0-4.2-1.9-4.2-4.2v-8.3c0-2.3,1.9-4.2,4.2-4.2c2.3,0,4.2,1.9,4.2,4.2v8.3C54.2,98.1,52.3,100,50,100z    M17.5,86.7c-1.1,0-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.3,0-5.9l5.8-5.8c1.6-1.6,4.3-1.6,5.9,0c1.6,1.6,1.6,4.3,0,5.9l-5.8,5.8   C19.6,86.3,18.6,86.7,17.5,86.7z M82.5,86.7c-1.1,0-2.1-0.4-2.9-1.2l-5.8-5.8c-1.6-1.6-1.6-4.3,0-5.9s4.3-1.6,5.9,0l5.8,5.8   c1.6,1.6,1.6,4.3,0,5.9C84.6,86.3,83.6,86.7,82.5,86.7z M95.8,54.2h-8.3c-2.3,0-4.2-1.9-4.2-4.2c0-2.3,1.9-4.2,4.2-4.2h8.3   c2.3,0,4.2,1.9,4.2,4.2C100,52.3,98.1,54.2,95.8,54.2z M12.5,54.2H4.2C1.9,54.2,0,52.3,0,50c0-2.3,1.9-4.2,4.2-4.2h8.3   c2.3,0,4.2,1.9,4.2,4.2C16.7,52.3,14.8,54.2,12.5,54.2z M76.7,27.5c-1.1,0-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.3,0-5.9l5.8-5.8   c1.6-1.6,4.3-1.6,5.9,0c1.6,1.6,1.6,4.3,0,5.9l-5.8,5.8C78.8,27.1,77.7,27.5,76.7,27.5z M23.3,27.5c-1.1,0-2.1-0.4-2.9-1.2   l-5.8-5.8c-1.6-1.6-1.6-4.3,0-5.9c1.6-1.6,4.3-1.6,5.9,0l5.8,5.8c1.6,1.6,1.6,4.3,0,5.9C25.5,27.1,24.4,27.5,23.3,27.5z M50,16.7   c-2.3,0-4.2-1.9-4.2-4.2V4.2C45.8,1.9,47.7,0,50,0c2.3,0,4.2,1.9,4.2,4.2v8.3C54.2,14.8,52.3,16.7,50,16.7z"></path>
      </g>
    </svg>
    <div class="ball"></div>
  </div>
</div>
        </div>
      
    </div>
  </div>
</div>

<script type="text/javascript" src="/assets/js/scripts.js"></script>

<script type="text/javascript" src="/assets/js/hamburger.js"></script>
<script type="text/javascript" src="/assets/js/darkModeSwitch.js"></script>



</body>
</html>